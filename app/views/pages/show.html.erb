<div id='outlet' class="row" data-component='Pages' data-view='Show'>
    <script type="text/javascript">  
        //used by the editor upload plugin
        var c_path = "<%= raw("/#{@page.container.url}/files/") %>";  
    </script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [["$","$"]]},displayAlign: "center",displayIndent: "0.1em"});
    </script>
    <script type="text/javascript" src="/assets/MathJax/MathJax.js?config=TeX-AMS_HTML" defer></script>
    <script type="text/javascript" src="/assets/MathJax/extensions/MathMenu.js" defer></script>
    <script type="text/javascript" src="/assets/MathJax/extensions/MathZoom.js" defer></script>

	<div class="col-lg-12">
        <!-- Mise en place de toute la navigation  -->
        <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
            <!-- Header de la page sans reaseaux sociaux pour le moment  -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <i class="fa fa-bars"></i>
                </button>
                <a class="navbar-brand" href="index.html"><img src="/templates/iutenligne/img/cartable.png" border="0" style="display:inline-block;">
                    <h1>
                        <%= link_to(@page.container.name, container_path(@page.container.id)) %>
                    </h1>
                </a>
            </div> 
            <!-- / fin Header de la page sans reaseaux sociaux pour le moment  -->
         
        
            <!-- Mise en place du menu pour gerer les creation et autre des ressources  -->
            <div class="actions navbar-default sidebar" role="navigation">
                <div class="sidebar-nav navbar-collapse">
                    <a href="http://www.iutenligne.net/resources.html">
                        <img src="/templates/iutenligne/img/iutenligne.png" border="0">
                    </a>
                    <ul class="nav" id="side-menu">
              		    <li>
                            <%= link_to(raw('<i class="fa fa-edit"></i> Editer'), edit_container_path(@page.container.id)) %>
                        </li>

              		    <li>
                            <%= link_to(raw('<i class="fa fa-remove"></i> Supprimer'), container_path(), :method => 'delete') %>
                        </li>

              		    <li>
                            <a href="#" id="generate_container"><i class="fa fa-wrench"></i> Générer</a>
                        </li>
                    </ul>
                </div>
          	</div>
            <!-- Fin de la Mise en place du menu pour gerer les creation et autre des ressources  -->

        </nav>
        <!-- / fin de la Mise en place de toute la navigation  -->
        <div id="page-wrapper">

            <div class="col-lg-3 row">
                <nav id="main-nav">
                    <ul>
                        <% @pages.each do |page| %>
                            <% if page.parent.nil? %>
                                <a href='<%= "/pages/#{page.id}" %>'>
                                    <li><%= "#{page.name}" %></li>
                                </a>
                                <% if has_children(page) %>
                                    <ul>
                                        <% children = get_children(page) %>
                                        <% children.each do |c| %>
                                            <a href='<%= "/pages/#{c.id.to_s}" %>'>
                                              <li><%= "#{c.name}" %></li>
                                            </a>
                                        <% end %>
                                    </ul>
                                <% end %>
                            <% end %>
                        <% end %>
                    </ul>
                    <%= render :partial => 'pages/new', :object => @new_page %>
                </nav>
            </div>
        
            <div class="col-lg-9">
                <div class="uploads" style="display: none">
                    <% @uploads.each do |file| %>
                        <a class="file"><%= "/#{file.url}" %></a><br>
                    <% end %>
                </div>
                <div>
                    <%= render :partial => 'pages/edit', :object => @page %>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $('#generate_container').click(function() {
        $.ajax({
          type: "GET",
          url: "/generate_container/<%= @page.container.id %>"
        });
    });
</script>